<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>POLYMAP3|Atlas</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="keywords" content="Geoportal, Karte, GIS, Polymap, Atlas, GDI, Ort, Geodaten, Geodatenkatalog, POI">
<meta name="description" content="Atlas">
<meta name="robots" content="index,follow">
<meta name="revisit-after" content="10 days">
<!-- meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0"-->
<meta http-equiv="cache-control" content="max-age=3600, must-revalidate">
<meta name="resource-type" content="document">
<meta name="Audience" content="Alle">
<meta name="rating" content="general">
<meta name="objecttype" content="journal">
<meta name="distribution" content="global">
<link rel="shortcut icon" href="images/favicon.ico">

<!-- jQuery -->
<script language="javascript" src="lib/jquery-1.7.1.min.js" type="text/javascript"></script>
<script language="javascript" src="lib/urlEncode.js" type="text/javascript"></script>
<script language="javascript" src="lib/jFav_v1.0.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.getUrlParam.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.dd.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.layout-1.3.0.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.localizer.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.i18n.properties-1.0.9.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.scrollTo-1.4.2-min.js" type="text/javascript"></script>
<script language="javascript" src="lib/jquery.combobox.js" type="text/javascript"></script>

<!-- OpenLayers -->
<!--script src="openlayers/full/OpenLayers.js" type="text/javascript"></script-->
<script src="openlayers/2.11/OpenLayers.js" type="text/javascript"></script>
<script src="openlayers/popup.js" type="text/javascript"></script>
<script src="openlayers/proj4js-1.1.0.min.js" type="text/javascript"></script>
<!-- Add projections from spatialreference.org/ -->
<script type="text/javascript">
    //Proj4js.defs["EPSG:4326"] = "+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs";
    Proj4js.defs["EPSG:3857"] = "+title=Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs";
    Proj4js.defs["EPSG:31467"] = "+title=Gauss-Krueger zone 3 +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs";
    Proj4js.defs["EPSG:31468"] = "+title=Gauss-Krueger zone 4 +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs";
    Proj4js.defs["EPSG:31469"] = "+title=Gauss-Krueger zone 5 +proj=tmerc +lat_0=0 +lon_0=15 +k=1 +x_0=5500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs";
    Proj4js.defs["EPSG:25831"] = "+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs";
    Proj4js.defs["EPSG:25832"] = "+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs";
    Proj4js.defs["EPSG:25833"] = "+title=ETRS89 / UTM zone 33N +proj=utm +zone=33 +ellps=GRS80 +units=m +no_defs";
    Proj4js.defs["EPSG:2065"] = "+title=S-JTSK (Ferro) / Krovak +proj=krovak +lat_0=49.5 +lon_0=42.5 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro +units=m +no_defs";
</script>

<!-- Atlas CSS -->
<link rel="stylesheet" type="text/css" href="css/custom-theme/jquery-ui-1.8.16.custom.css" />
<!--link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.8.4.custom.css" /-->
<!--link rel="stylesheet" type="text/css" href="css/redmond/jquery-ui-1.8.custom.css" /-->
<!--link rel="stylesheet" type="text/css" href="css/ui-lightness2/jquery-ui-1.8.custom.css" /-->
<!--link rel="stylesheet" type="text/css" href="css/cupertino2/jquery-ui-1.8.custom.css" /-->
<!--link rel="stylesheet" type="text/css" href="css/start/jquery-ui-1.8.custom.css" /-->
<link rel="stylesheet" type="text/css" href="css/atlas.css" />
<link rel="stylesheet" type="text/css" href="css/atlas.layout.css" />
<link rel="stylesheet" type="text/css" href="css/atlas.ol.css" />

<!-- Atlas JavaScript -->
<script src="js/utils.js" type="text/javascript"></script>
<script src="js/atlas.layout.js" type="text/javascript"></script>
<script src="js/inheritance.js" type="text/javascript"></script>
<script src="js/events.js" type="text/javascript"></script>
<script src="js/atlas.js" type="text/javascript"></script>
<script src="js/toolitems.js" type="text/javascript"></script>
<script src="js/topbar.js" type="text/javascript"></script>
<script src="js/transmap.js" type="text/javascript"></script>
<script src="js/measure.js" type="text/javascript"></script>
<script src="js/searchservice.js" type="text/javascript"></script>
<script src="js/searchlayer.js" type="text/javascript"></script>
<script src="js/searchlayerstyle.js" type="text/javascript"></script>
<script src="js/searchcontext.js" type="text/javascript"></script>
<script src="js/searchpriority.js" type="text/javascript"></script>
<script src="js/routing.service-osm2po.js" type="text/javascript"></script>
<script src="js/routing.nearby.js" type="text/javascript"></script>
<script src="js/routing.shortestpath.js" type="text/javascript"></script>
<script src="js/routing.js" type="text/javascript"></script>
<script src="js/boundsearch.js" type="text/javascript"></script>
<script src="js/coords.js" type="text/javascript"></script>

<!-- Local config -->
<script type="text/javascript">

/**
 * The Atlas environment with individual settings.
 */
MyAtlasClass = AtlasClass.extend( new function() {
    
    /**
     *
     */
    this.init = function( config ) {
        Atlas = this;
        this._super( {
            //autocompleteUrl : '../polymap/lka/search',
            autocompleteUrl: 'search',
            searchUrl: 'search',
            baseUrl: 'index.html',
            mapCRS: "EPSG:900913"
        });
        
        // init search result priorities        
        this.priorities.push( new ExclusiveCategoriesPriority( ['buchung', 'address'] ) );
        this.priorities.push( new OnScreenPriority() );
        this.priorities.push( new LexicalPriority() );
        
        // load and init bound search
        $.ajax({
            url: 'boundsearch.json',
            dataType: 'html',
            cache: false,
            success: function( data ) {
                var json = new OpenLayers.Format.JSON().read( data );
                Atlas.boundSearch = new BoundSearch( json );
            }
        });
        
        // init measure
        Atlas.measure = new MeasureMode( Atlas.map, $("#measure_link") );
        
        // init I18N
        var lang = $(document).getUrlParam( "lang" );    
        jQuery.i18n.properties({
                name: 'messages', 
                path: 'bundle/', 
                mode: 'map', 
                language: lang,  //'cz_CZ',
                callback: function( settings ) {
                    Atlas.language = settings.language;
                }
        });
    
        // init translation; tweak context functions
        Atlas.transmap = new TransMap( 'bundle/trans_', ['de_cz'] );
        
        Atlas.routing = new Routing(
            'http://10.0.15.2:8888/Osm2poService', // '../routing-service/web/v1.0', 
            'a27fb9d8ace734e3b4395ec342ddb35c' );
            //'f4c8d0c39ff58a705a9677f38fbee7af' );
        
        // Topbar
        Atlas.topbar = new Topbar( $('#topbar') )
            .addLeft( new LinkToolItem( "tb_1", $.i18n.prop( "project_title" ), 
                    "tooltip", $.i18n.prop( "project_link" ) ) )
            //.addLeft( new LinkToolItem( "tb_2", "Projekt", "tooltip", "http://google.de" ) )
            //.addRight( new LangSwitcherItem( "tb_cz", "images/cz.gif", "", "cz" ) )
            //.addRight( new LangSwitcherItem( "tb_de", "images/de.gif", "", "de" ) )
            //.addRight( new LangSwitcherItem( "tb_en", "images/en.gif", "", "en" ) )
            .addRight( new HtmlDialogToolItem( "tb_help", "tb_help".i18n(), "tb_help_tip".i18n(), $('#dialog'), "hilfe.html" ) )
            .addRight( new HtmlDialogToolItem( "tb_legal", "tb_legal".i18n(), "tb_editorial_tip".i18n(), $('#dialog'), "impressum.html" ) )
            .addRight( new HtmlDialogToolItem( "tb_contact", "tb_contact".i18n(), "tb_contact_tip".i18n(), $('#dialog'), "kontakt.html" ) )
            .create();
        
        // Toolbar
        if ($(document).getUrlParam( 'north' ) != 'off') {
            Atlas.toolbar = new Toolbar( $('#toolbar2') )
                .addLeft( new ToggleLayerItem( "tb_dop", $.i18n.prop( "tb_dop_label" ), 
                        $.i18n.prop( "tb_dop_label" ), $.i18n.prop( "tb_dop_icon" ), Atlas.map, "DOP" ) )
                .addRight( new SubmitNewItem( "tb_new" ) )
                .addRight( new CoordinateItem( "tb_coord" ) )
                .addRight( new ToggleMeasureItem( "tb_measure", Atlas.measure ) )
                .addRight( new LinkItem( "tb_link" ) )
                .addRight( new KmlItem( "tb_kml" ) )
                .addRight( new GeoRssItem( "tb_georss" ) )
                .addRight( new BookmarkItem( "tb_bookmark" ) )
                //.addRight( new TestRoutingItem( "tb_routing", Atlas.routing ) )
                .create();
        }
        else {
            $('#map').css( 'top', '0' );
            $('#map').append( '<div class="olControlBacklink"><a href="{0}" title="Kompletten Atlas in neuem Fenster Ã¶ffnen" target="_blank">{1}</a></div>'
                    .format( 'logo_link'.i18n(), 'logo_title'.i18n() ) );
        }
        
        dialogDiv = $('#dialog');        
    
        // localize HTML
        $(function() {
            $('html').localize();
        });
    
        // make all divs in north_pane visible after the HTML is localized
        window.setTimeout( function() {
            $('#north_pane>div').fadeIn( 1000 );
            $('#search_field').focus();
        }, 1000 );
    };
    
});

var Atlas;

function initLocal() {
    // init the Atlas
    Atlas = new MyAtlasClass();
}

</script>
</head>

<!-- ******************************************************
  - HTML
  -->
<body onload="initLocal(); init_layout(); ">        

<!-- Layout North -->
<!--div class="ui-layout-north" onmouseover="myLayout.allowOverflow('north')" onmouseout="myLayout.resetOverflow(this)"-->
<div id="north_pane" class="ui-layout-north" style="padding:0px; overflow:visible; overflow-x:auto; overflow-y:hidden;">
    <!-- Topbar -->
    <div id="topbar" style="display:none;">
    </div>

    <!-- Logo -->
    <div id="logo_pane" style="display:none;">
        <a title="logo_title" href="logo_link"> 
        <img style= border:none; src="logo_img" id="logo" alt="logo_img_alt" width="200" height="74"/></a>
    </div>
    
    <!-- Search Form -->
    <div id="search_pane" class="ui-widget-content" style="border:none; display:none;">
        <img style="margin: 1px 0px 0px; padding: 0px; position: absolute; left: -38px; top: 20px;" src="images/marker_red.png" id="search_img">
        
        <input title="Sucheingabe" id="search_field" size="40" maxlength="150" 
            class="ui-autocomplete-input ui-widget" />
        
        <button id="search_btn" value="Suchen" title="Suchen" class="ui-corner-right"></button>
    </div>
</div>

<!-- Layout East -->
<div id="tabs" class="ui-layout-east" style="visibility:hidden;">
    <!--div id="tabs" style="height: 100%;"-->
        <ul style="border-top:none; border-right:none; border-left:none;">
            <li>
                <a href="#result_body0" id="tab_title_result0"
                   style="border:none; width:28px; color:#ffffff; text-shadow: 1px 1px 2px #666; padding:0.4em 0.5em 0.4em 1.5em; background:url(images/marker_red.png) no-repeat scroll 5px 50% transparent;">
                    &lt;&gt;
                </a>
            </li>
            <li>
                <a href="#result_body1" id="tab_title_result1"
                   style="border:none; width:28px; color:#ffffff; text-shadow: 1px 1px 2px #666; padding:0.4em 0.5em 0.4em 1.5em; background:url(images/marker_green.png) no-repeat scroll 5px 50% transparent;">
                    &lt;&gt;
                </a>
            </li>
            <li>
                <a href="#result_body2" id="tab_title_result2"
                   style="border:none; width:28px; color:#ffffff; text-shadow: 1px 1px 2px #666; padding:0.4em 0.5em 0.4em 1.5em; background:url(images/marker_yellow.png) no-repeat scroll 5px 50% transparent;">
                    &lt;&gt;
                </a>
            </li>
            <li>
                <a href="#result_body3" id="tab_title_result3"
                   style="border:none; width:28px; color:#ffffff; text-shadow: 1px 1px 2px #666; padding:0.4em 0.5em 0.4em 1.5em; background:url(images/marker_blue.png) no-repeat scroll 5px 50% transparent;">
                    &lt;&gt;
                </a>
            </li>
            <li>
                <a href="#result_body_routing" id="tab_title_result_routing"
                   title="Routing"
                   style="border:none; width:28px; color:#ffffff; text-shadow: 1px 1px 2px #666; padding:0.4em 0.5em 0.4em 1.5em; background:url(images/flag_yellow.png) no-repeat scroll 5px 50% transparent;">
                   &nbsp;
                </a>
            </li>
        </ul>
        
        <div id="result_body0" class="atlas-result-body ui-layout-content ui-dialog-content">
            <div style="margin:1.7em;">result_body_red</div>
        </div>
        <div id="result_body1" class="atlas-result-body ui-layout-content ui-dialog-content">
            <div style="margin:1.7em;">result_body_green</div>
        </div>
        <div id="result_body2" class="atlas-result-body ui-layout-content ui-dialog-content">
            <div style="margin:1.7em;">result_body_yellow</div>
        </div>
        <div id="result_body3" class="atlas-result-body ui-layout-content ui-dialog-content">
            <div style="margin:1.7em;">result_body_blue</div>
        </div>
        <div id="result_body_routing" class="atlas-result-body ui-layout-content ui-dialog-content">
            <div style="margin:1.7em;">Routing...</div>
        </div>
</div>

<!-- Layout Center -->
<!-- overflow-xxx is for IE to hide vertical scrollbar -->
<div id="center_pane" class="ui-layout-center" style="visibility:hidden; padding:0px; overflow:visible; overflow-x:auto; overflow-y:hidden; border:none;">
    
    <div id="toolbar2" style="z-index:100;"></div>

    <!-- div class="map-shadow ui-widget-content ui-corner-bottom"
            style="z-index: 1000; background-color: transparent; position: absolute; left: 0px; right: 0px; top: 34px; bottom: 0px;">
    </div-->
    <div id="map" class="ui-widget-content ui-corner-bottom"
            style="position: absolute; left: 0px; right: 0px; top: 34px; bottom: 0px; background: #ECEDF5;">
    </div>
</div>

<!-- This div is used as the content of the dialog boxes for help, contact, etc. -->
<div id="dialog"></div>

</body>
</html>
